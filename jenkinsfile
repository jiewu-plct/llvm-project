node("sf2-3"){
    stage('*** Cleanup***') {
        cleanWs()
    }
    stage('*** Check out SCM ***') {
        checkout scm
    } 
    stage('*** Compilation Phase ***') { 
        sh '''#!/bin/bash
            cat ./jenkinsfile
            mkdir build && cd build
            cmake -DLLVM_PARALLEL_LINK_JOBS=3 -DLLVM_ENABLE_PROJECTS="clang" -DLLVM_TARGETS_TO_BUILD="RISCV" -DCMAKE_BUILD_TYPE="Release" -G Ninja ../llvm
            ninja
         '''
    }
    stage (' *** Test ***'){
        sh '''#!/bin/bash
            cd build
            bin/clang -v
            bin/llvm-objdump --version | grep riscv
            ninja check-llvm
         '''
    }
}
